version: '3.8'

services:
  proxy:
    image: nginx:latest
    ports:
      - '80:80'
    configs:
    - source: nginx-conf
      target: /etc/nginx/conf.d/default.conf
    deploy:
      mode: replicated
      replicas: 2

configs:
  nginx-conf:
    file: ./nginx.conf